<!DOCTYPE html>
<html>
<head>
	<title>{{ title }}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/static/jquery.mobile-1.1.0.min.css" />
	<script src="/static/jquery-1.7.2.min.js"></script>
	<script src="/static/jquery.mobile-1.1.0.min.js"></script>
	<script>
		var source = new EventSource('/events');
		source.onmessage = function(e) {
			var data = e.data.replace(/\|/g, "\n");
			$('#avr_state').contents().replaceWith(data);
		};
	</script>

</head>
<body>

<div data-role="page" id="main">

	<div data-role="header">
		<h1>{{ title }}</h1>
	</div><!-- /header -->

	<div data-role="content">
		{% for c in sorted(cmd_handlers) %}
			{% if c %}
			<a href="/{{ url_escape(c.replace(' ', '/')) }}" data-role="button">
				{{ c }}
			</a>
			{% end %}
		{% end %}

		<p>Last command: '{{ last_cmd }}'</p>
	</div><!-- /content -->

	<div data-role="footer">
		<pre id="avr_state">Initializing...</pre>
	</div><!-- /footer -->

</div><!-- /page -->

</body>
</html>
